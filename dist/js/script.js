!function t(e,r,o){function n(s,a){if(!r[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[s]={exports:{}};e[s][0].call(d.exports,function(t){var r=e[s][1][t];return n(r?r:t)},d,d.exports,t,e,r,o)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({"./src/js/index.js":[function(t){var e=t("./components/Application"),r=io.connect(),o=e({socket:r});React.renderComponent(o,document.body)},{"./components/Application":"/Users/contra/Projects/gifbooth/src/js/components/Application/index.js"}],"/Users/contra/Projects/gifbooth/node_modules/browserify/node_modules/process/browser.js":[function(t,e){function r(){}var o=e.exports={};o.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var o=[];if(e){var n=document.createElement("div"),i=new MutationObserver(function(){var t=o.slice();o.length=0,t.forEach(function(t){t()})});return i.observe(n,{attributes:!0}),function(t){o.length||n.setAttribute("yes","no"),o.push(t)}}return r?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),o.length>0)){var r=o.shift();r()}},!0),function(t){o.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw new Error("process.chdir is not supported")}},{}],"/Users/contra/Projects/gifbooth/node_modules/getusermedia/index-browser.js":[function(t,e){var r=window.navigator.getUserMedia||window.navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia;e.exports=function(t,e){var o,n=2===arguments.length,i={video:!0,audio:!0},s="PermissionDeniedError",a="ConstraintNotSatisfiedError";return n||(e=t,t=i),r?(localStorage&&"true"===localStorage.useFirefoxFakeDevice&&(t.fake=!0),void r.call(window.navigator,t,function(t){e(null,t)},function(t){var r;"string"==typeof t?(r=new Error("MediaStreamError"),r.name=t===s?s:a):(r=t,r.name||(t.name=r[s]?s:a)),e(r)})):(o=new Error("MediaStreamError"),o.name="NotSupportedError",e(o))}},{}],"/Users/contra/Projects/gifbooth/node_modules/raf/index.js":[function(t,e){for(var r=t("performance-now"),o="undefined"==typeof window?{}:window,n=["moz","webkit"],i="AnimationFrame",s=o["request"+i],a=o["cancel"+i]||o["cancelRequest"+i],c=!0,u=0;u<n.length&&!s;u++)s=o[n[u]+"Request"+i],a=o[n[u]+"Cancel"+i]||o[n[u]+"CancelRequest"+i];if(!s||!a){c=!1;var d=0,h=0,p=[],l=1e3/60;s=function(t){if(0===p.length){var e=r(),o=Math.max(0,l-(e-d));d=o+e,setTimeout(function(){var t=p.slice(0);p.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(d)}catch(r){setTimeout(function(){throw r},0)}},Math.round(o))}return p.push({handle:++h,callback:t,cancelled:!1}),h},a=function(t){for(var e=0;e<p.length;e++)p[e].handle===t&&(p[e].cancelled=!0)}}e.exports=function(t){return c?s.call(o,function(){try{t.apply(this,arguments)}catch(e){setTimeout(function(){throw e},0)}}):s.call(o,t)},e.exports.cancel=function(){a.apply(o,arguments)}},{"performance-now":"/Users/contra/Projects/gifbooth/node_modules/raf/node_modules/performance-now/lib/performance-now.js"}],"/Users/contra/Projects/gifbooth/node_modules/raf/node_modules/performance-now/lib/performance-now.js":[function(t,e){(function(t){(function(){var r,o,n;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(r()-n)/1e6},o=t.hrtime,r=function(){var t;return t=o(),1e9*t[0]+t[1]},n=r()):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)}).call(this,t("_process"))},{_process:"/Users/contra/Projects/gifbooth/node_modules/browserify/node_modules/process/browser.js"}],"/Users/contra/Projects/gifbooth/node_modules/superagent/lib/client.js":[function(t,e){function r(){}function o(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function n(){if(g.XMLHttpRequest&&("file:"!=g.location.protocol||!g.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function i(t){return t===Object(t)}function s(t){if(!i(t))return t;var e=[];for(var r in t)null!=t[r]&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}function a(t){for(var e,r,o={},n=t.split("&"),i=0,s=n.length;s>i;++i)r=n[i],e=r.split("="),o[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return o}function c(t){var e,r,o,n,i=t.split(/\r?\n/),s={};i.pop();for(var a=0,c=i.length;c>a;++a)r=i[a],e=r.indexOf(":"),o=r.slice(0,e).toLowerCase(),n=v(r.slice(e+1)),s[o]=n;return s}function u(t){return t.split(/ *; */).shift()}function d(t){return m(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),o=r.shift(),n=r.shift();return o&&n&&(t[o]=n),t},{})}function h(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method?this.xhr.responseText:null,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function p(t,e){var r=this;f.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new h(r)}catch(o){t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=o}r.callback(t,e)})}function l(t,e){return"function"==typeof e?new p("GET",t).end(e):1==arguments.length?new p("GET",t):new p(t,e)}var f=t("emitter"),m=t("reduce"),g="undefined"==typeof window?this:window,v="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};l.serializeObject=s,l.parseString=a,l.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},l.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},l.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},h.prototype.get=function(t){return this.header[t.toLowerCase()]},h.prototype.setHeaderProperties=function(){var t=this.header["content-type"]||"";this.type=u(t);var e=d(t);for(var r in e)this[r]=e[r]},h.prototype.parseBody=function(t){var e=l.parse[this.type];return e&&t&&t.length?e(t):null},h.prototype.setStatusProperties=function(t){var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t||1223==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},h.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,o="cannot "+e+" "+r+" ("+this.status+")",n=new Error(o);return n.status=this.status,n.method=e,n.url=r,n},l.Response=h,f(p.prototype),p.prototype.use=function(t){return t(this),this},p.prototype.timeout=function(t){return this._timeout=t,this},p.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},p.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype.set=function(t,e){if(i(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},p.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},p.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},p.prototype.type=function(t){return this.set("Content-Type",l.types[t]||t),this},p.prototype.accept=function(t){return this.set("Accept",l.types[t]||t),this},p.prototype.auth=function(t,e){var r=btoa(t+":"+e);return this.set("Authorization","Basic "+r),this},p.prototype.query=function(t){return"string"!=typeof t&&(t=s(t)),t&&this._query.push(t),this},p.prototype.field=function(t,e){return this._formData||(this._formData=new FormData),this._formData.append(t,e),this},p.prototype.attach=function(t,e,r){return this._formData||(this._formData=new FormData),this._formData.append(t,e,r),this},p.prototype.send=function(t){var e=i(t),r=this.getHeader("Content-Type");if(e&&i(this._data))for(var o in t)this._data[o]=t[o];else"string"==typeof t?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return e?(r||this.type("json"),this):this},p.prototype.callback=function(t,e){var r=this._callback;return this.clearTimeout(),2==r.length?r(t,e):t?this.emit("error",t):void r(e)},p.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},p.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(t){var e=this,i=this.xhr=n(),s=this._query.join("&"),a=this._timeout,c=this._formData||this._data;if(this._callback=t||r,i.onreadystatechange=function(){return 4==i.readyState?0==i.status?e.aborted?e.timeoutError():e.crossDomainError():void e.emit("end"):void 0},i.upload&&(i.upload.onprogress=function(t){t.percent=t.loaded/t.total*100,e.emit("progress",t)}),a&&!this._timer&&(this._timer=setTimeout(function(){e.abort()},a)),s&&(s=l.serializeObject(s),this.url+=~this.url.indexOf("?")?"&"+s:"?"+s),i.open(this.method,this.url,!0),this._withCredentials&&(i.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof c&&!o(c)){var u=l.serialize[this.getHeader("Content-Type")];u&&(c=u(c))}for(var d in this.header)null!=this.header[d]&&i.setRequestHeader(d,this.header[d]);return this.emit("request",this),i.send(c),this},l.Request=p,l.get=function(t,e,r){var o=l("GET",t);return"function"==typeof e&&(r=e,e=null),e&&o.query(e),r&&o.end(r),o},l.head=function(t,e,r){var o=l("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&o.send(e),r&&o.end(r),o},l.del=function(t,e){var r=l("DELETE",t);return e&&r.end(e),r},l.patch=function(t,e,r){var o=l("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&o.send(e),r&&o.end(r),o},l.post=function(t,e,r){var o=l("POST",t);return"function"==typeof e&&(r=e,e=null),e&&o.send(e),r&&o.end(r),o},l.put=function(t,e,r){var o=l("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&o.send(e),r&&o.end(r),o},e.exports=l},{emitter:"/Users/contra/Projects/gifbooth/node_modules/superagent/node_modules/component-emitter/index.js",reduce:"/Users/contra/Projects/gifbooth/node_modules/superagent/node_modules/reduce-component/index.js"}],"/Users/contra/Projects/gifbooth/node_modules/superagent/node_modules/component-emitter/index.js":[function(t,e){function r(t){return t?o(t):void 0}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){o.off(t,r),e.apply(this,arguments)}var o=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var o,n=0;n<r.length;n++)if(o=r[n],o===e||o.fn===e){r.splice(n,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var o=0,n=r.length;n>o;++o)r[o].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],"/Users/contra/Projects/gifbooth/node_modules/superagent/node_modules/reduce-component/index.js":[function(t,e){e.exports=function(t,e,r){for(var o=0,n=t.length,i=3==arguments.length?r:t[o++];n>o;)i=e.call(null,i,t[o],++o,t);return i}},{}],"/Users/contra/Projects/gifbooth/node_modules/whammy/whammy.js":[function(t,e){(function(t,r){r.Whammy=function(){function t(t,r){for(var o=e(t),n=3e4,s=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:d(o.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:o.width,id:176},{data:o.height,id:186}]}]}]}]}],c=0,u=0;c<t.length;){var h=[],p=0;do h.push(t[c]),p+=t[c].duration,c++;while(c<t.length&&n>p);var l=0,f={id:524531317,data:[{data:u,id:231}].concat(h.map(function(t){var e=a({discardable:0,frame:t.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(l)});return l+=t.duration,{data:e,id:163}}))};s[1].data.push(f),u+=p}return i(s,r)}function e(t){for(var e=t[0].width,r=t[0].height,o=t[0].duration,n=1;n<t.length;n++){if(t[n].width!=e)throw"Frame "+(n+1)+" has a different width";if(t[n].height!=r)throw"Frame "+(n+1)+" has a different height";if(t[n].duration<0||t[n].duration>32767)throw"Frame "+(n+1)+" has a weird duration (must be between 0 and 32767)";o+=t[n].duration}return{duration:o,width:e,height:r}}function r(t){for(var e=[];t>0;)e.push(255&t),t>>=8;return new Uint8Array(e.reverse())}function o(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function n(t){var e=[],r=t.length%8?new Array(9-t.length%8).join("0"):"";t=r+t;for(var o=0;o<t.length;o+=8)e.push(parseInt(t.substr(o,8),2));return new Uint8Array(e)}function i(t,e){for(var a=[],c=0;c<t.length;c++){var u=t[c].data;if("object"==typeof u&&(u=i(u,e)),"number"==typeof u&&(u=n(u.toString(2))),"string"==typeof u&&(u=o(u)),u.length);var d=u.size||u.byteLength||u.length,h=Math.ceil(Math.ceil(Math.log(d)/Math.log(2))/8),p=d.toString(2),l=new Array(7*h+7+1-p.length).join("0")+p,f=new Array(h).join("0")+"1"+l;a.push(r(t[c].id)),a.push(n(f)),a.push(u)}if(e){var m=s(a);return new Uint8Array(m)}return new Blob(a,{type:"video/webm"})}function s(t,e){null==e&&(e=[]);for(var r=0;r<t.length;r++)"object"==typeof t[r]?s(t[r],e):e.push(t[r]);return e}function a(t){var e=0;if(t.keyframe&&(e|=128),t.invisible&&(e|=8),t.lacing&&(e|=t.lacing<<1),t.discardable&&(e|=1),t.trackNum>127)throw"TrackNumber > 127 not supported";var r=[128|t.trackNum,t.timecode>>8,255&t.timecode,e].map(function(t){return String.fromCharCode(t)}).join("")+t.frame;return r}function c(t){for(var e=t.RIFF[0].WEBP[0],r=e.indexOf("*"),o=0,n=[];4>o;o++)n[o]=e.charCodeAt(r+3+o);var i,s,a,c,u;return u=n[1]<<8|n[0],i=16383&u,s=u>>14,u=n[3]<<8|n[2],a=16383&u,c=u>>14,{width:i,height:a,data:e,riff:t}}function u(t){for(var e=0,r={};e<t.length;){var o=t.substr(e,4),n=parseInt(t.substr(e+4,4).split("").map(function(t){var e=t.charCodeAt(0).toString(2);return new Array(8-e.length+1).join("0")+e}).join(""),2),i=t.substr(e+4+4,n);e+=8+n,r[o]=r[o]||[],r[o].push("RIFF"==o||"LIST"==o?u(i):i)}return r}function d(t){return[].slice.call(new Uint8Array(new Float64Array([t]).buffer),0).map(function(t){return String.fromCharCode(t)}).reverse().join("")}function h(t,e){this.frames=[],this.duration=1e3/t,this.quality=e||.8}return h.prototype.add=function(t,e){if("undefined"!=typeof e&&this.duration)throw"you can't pass a duration if the fps is set";if("undefined"==typeof e&&!this.duration)throw"if you don't have the fps set, you ned to have durations here.";if("canvas"in t&&(t=t.canvas),"toDataURL"in t)t=t.toDataURL("image/webp",this.quality);else if("string"!=typeof t)throw"frame must be a a HTMLCanvasElement, a CanvasRenderingContext2D or a DataURI formatted string";if(!/^data:image\/webp;base64,/gi.test(t))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:t,duration:e||this.duration})},h.prototype.compile=function(e){return new t(this.frames.map(function(t){var e=c(u(atob(t.image.slice(23))));return e.duration=t.duration,e}),e)},{Video:h,fromImageArray:function(e,r,o){return t(e.map(function(t){var e=c(u(atob(t.slice(23))));return e.duration=1e3/r,e}),o)},toWebM:t}}(),"undefined"!=typeof t&&(e.exports=Whammy)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:"/Users/contra/Projects/gifbooth/node_modules/browserify/node_modules/process/browser.js"}],"/Users/contra/Projects/gifbooth/src/js/components/Application/index.js":[function(t,e){var r=t("../BottomBar"),o=t("../ChatMessage"),n=t("superagent"),i=React.createClass({displayName:"Application",propTypes:{socket:React.PropTypes.object.isRequired},getInitialState:function(){return{messages:[]}},componentWillMount:function(){n.get("/messages").type("json").end(function(t,e){return t?console.error(t):(e.body.forEach(this.addMessage),void this.props.socket.on("message",this.addMessage))}.bind(this))},addMessage:function(t){var e=this.state.messages;e.unshift({key:t.video,id:t.video,text:t.text,url:"/video/"+t.video}),this.setState({messages:e})},sendMessage:function(t,e){var r=new FormData;r.append("text",t),r.append("video",e);var o=new XMLHttpRequest;o.open("POST","/upload",!0),o.send(r)},render:function(){var t=r({ref:"bottomBar",key:"bottomBar",recordTime:4e3,onSubmit:this.sendMessage}),e=React.DOM.div({className:"message-wall",key:"messageWall",ref:"messageWall"},this.state.messages.map(o)),n=React.DOM.div({className:"application"},[e,t]);return n}});e.exports=i},{"../BottomBar":"/Users/contra/Projects/gifbooth/src/js/components/BottomBar/index.js","../ChatMessage":"/Users/contra/Projects/gifbooth/src/js/components/ChatMessage/index.js",superagent:"/Users/contra/Projects/gifbooth/node_modules/superagent/lib/client.js"}],"/Users/contra/Projects/gifbooth/src/js/components/BottomBar/index.js":[function(t,e){var r=t("../CaptureMedia"),o=React.createClass({mixins:[React.addons.LinkedStateMixin],displayName:"BottomBar",propTypes:{recordTime:React.PropTypes.number.isRequired,onSubmit:React.PropTypes.func.isRequired},getInitialState:function(){return{text:"Loading...",locked:!0}},submit:function(){var t=this.state.text;this.setState({text:"Recording...",locked:!0}),this.refs.selfie.record(this.props.recordTime,function(e){this.props.onSubmit(t,e),this.setState({locked:!1,text:""})}.bind(this))},handleKeyPress:function(t){13===t.which&&this.submit()},hasStream:function(){this.setState({locked:!1,text:""})},render:function(){if(!window.chrome)return null;var t=r({ref:"selfie",key:"selfie",className:"bottom-bar-selfie",onStream:this.hasStream}),e=React.DOM.input({ref:"txt",key:"txt",placeholder:"Type a message...",onKeyPress:this.handleKeyPress,disabled:this.state.locked,className:"bottom-bar-text",valueLink:this.linkState("text")}),o=this.state.locked?"locked":"unlocked";return React.DOM.div({ref:"container",className:"bottom-bar "+o},[t,e])}});e.exports=o},{"../CaptureMedia":"/Users/contra/Projects/gifbooth/src/js/components/CaptureMedia/index.js"}],"/Users/contra/Projects/gifbooth/src/js/components/CaptureMedia/index.js":[function(t,e){var r=t("getusermedia"),o=t("./record"),n=React.createClass({displayName:"CaptureMedia",propTypes:{onStream:React.PropTypes.func},getInitialState:function(){return{stream:null,src:null}},componentWillMount:function(){r({video:!0,audio:!1},this.handleGUM)},componentDidMount:function(){var t=this.refs.videoElement.getDOMNode();t.addEventListener("playing",this.onPlay,!1)},componentWillUnmount:function(){var t=this.refs.videoElement.getDOMNode();t.removeEventListener("playing",this.onPlay,!1)},handleGUM:function(t,e){return e?void this.setState({stream:e,src:URL.createObjectURL(e)}):console.error(t)},record:function(t,e){o(this.refs.videoElement.getDOMNode(),t,e)},onPlay:function(){this.props.onStream&&this.props.onStream(this.state.stream)},render:function(){return React.DOM.video({ref:"videoElement",src:this.state.src,muted:!0,autoPlay:!0,className:this.props.className,style:this.props.style})}});e.exports=n},{"./record":"/Users/contra/Projects/gifbooth/src/js/components/CaptureMedia/record.js",getusermedia:"/Users/contra/Projects/gifbooth/node_modules/getusermedia/index-browser.js"}],"/Users/contra/Projects/gifbooth/src/js/components/CaptureMedia/record.js":[function(t,e){var r=t("whammy"),o=(t("raf"),document.createElement("video")),n=document.createElement("canvas"),i=30;e.exports=function(t,e,s){var a=new r.Video(i,1),c=t.videoHeight/t.videoWidth,u=Math.max(t.videoWidth,400),d=c*u;n.width=u,n.height=d,o.width=u,o.height=d,o.src=t.src;var h=n.getContext("2d"),p=Date.now(),l=function(){var t=Date.now()-p;return t>=e?f():(setTimeout(l,i),h.drawImage(o,0,0,u,d),void a.add(h))},f=function(){var t=a.compile();o.src="",o.pause(),o.removeEventListener("playing",l,!1),s(t)};o.addEventListener("playing",l,!1),o.play()}},{raf:"/Users/contra/Projects/gifbooth/node_modules/raf/index.js",whammy:"/Users/contra/Projects/gifbooth/node_modules/whammy/whammy.js"}],"/Users/contra/Projects/gifbooth/src/js/components/ChatMessage/index.js":[function(t,e){var r,o=["webm","ogg"];try{var n=document.createElement("video");r=o.some(function(t){return n.canPlayType("video/"+t)})}catch(i){console.log(i),r=!1}var s=React.createClass({displayName:"ChatMessage",propTypes:{id:React.PropTypes.string.isRequired,url:React.PropTypes.string.isRequired,text:React.PropTypes.string},render:function(){var t=React.DOM.img({ref:"video-gif-source",key:"video-gif-source"+this.props.id,src:this.props.url+".gif",className:"chat-message-video"}),e=o.map(function(t){return React.DOM.source({ref:"video-"+t+"-source",key:"video-"+t+"-source"+this.props.id,src:this.props.url+"."+t,type:"video/"+t})},this),n=React.DOM.video({ref:"video",key:"video-"+this.props.id,loop:!0,controls:!1,autoPlay:!0,className:"chat-message-video"},e),i=this.props.text?React.DOM.div({ref:"text",key:"text-"+this.props.id,className:"chat-message-text"},this.props.text):null,s=r?n:t;return React.DOM.div({ref:"container-"+this.props.id,className:"chat-message"},[s,i])}});e.exports=s},{}]},{},["./src/js/index.js"]);
//# sourceMappingURL=dist/js/maps/script.js.map